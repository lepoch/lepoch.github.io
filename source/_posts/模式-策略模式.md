---
title: æ¨¡å¼-ç­–ç•¥æ¨¡å¼
date: 2018-07-31T16:35:00.000Z
tags:
  - æ¨¡å¼
  - ç¬”è®°
categories:
  - æ¨¡å¼
  - è¡Œä¸ºå‹æ¨¡å¼
---

è®¾è®¡æ¨¡å¼ä¹‹ç­–ç•¥æ¨¡å¼

<!-- MORE -->

## ç®€ä»‹
> ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•æ—ï¼Œåˆ†åˆ«åˆ†è£…èµ·æ¥ï¼Œè®©ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚

## å…³é”®ç‚¹
- æ˜“äºå˜åŒ–çš„éƒ¨åˆ†
- ç»„åˆ

## å…·ä½“ä¾‹å­ ğŸŒ°
### é¢˜

- æœ‰ä¸ªæ¸¸æˆæœ‰å„ç§é¸­å­ï¼Œæœ‰æ¸¸æ³³ã€å‘±å‘±å«çš„è¡Œä¸º
- å„ç§é¸­å­åŒ…æ‹¬
  - ç»¿å¤´é¸­
  - çº¢å¤´é¸­
  - æ©¡çš®é¸­
  - è¶…é¸­
- æœ‰äº›é¸­å­ä¼šé£
- æœ‰äº›é¸­å­ä¼šå«
- é¸­å­éƒ½ä¼šæ¸¸æ³³

## ç±»å›¾
![](http://www.plantuml.com/plantuml/png/VL9Dwn917BxFfnWy6R7hDn2943eOL0VFu-weYwEkkpE5g51485HOXpfuABI28XI4A5-Aliokgz-Y-S_kZBERBmpuUtcUv_Uolv9FaKTPcm3gK89XBbgyZzvzsN-TXRydEU0YguKQF1mkv_lnhnmS002XHP3lmxlCQd4VyfzH9lqxk8aUErqFrazsd7p0k8fAztGF2CHj7rDD8S_jUsLTvvQ2fRJomkDGgQc1JJFXF77Q-OHlExvBK5-wTQ9C8I2SqMd02Y84URQQKrU0XGACTd_3pp-EwuMWITP3R3SnkiBQpi-nMAs6lOka_RTPD5rcIO-OUuLp-Fb24W3KXp6COV7c7q2zMJsgcj62gfYASLrr7yTF7mwpL_m5wsro9Kw7Og-EB0pZxpbGMyykckUh3crMdKx3rs5Y3AwS6fedxdUhgFyVCDWz3JRZOFlo-FnFi7uTFflAAhg-mLpJ71P5Im0gjLHufDtzszNDcto_C9gymC6LEnAOD48q76kdlsYFONGM-sR5NmfROHHVabQx23OVqxiGZ6HQOOirn7MpOLKYc-5AyIN42vEEJ0DGmXsRjSa_)

## å®ç°
### GO

#### å®šä¹‰
##### å®¢æˆ·
```GO
type DuckIF interface {
	Fly()
	Quack()
	Swim()
	Display()
}

type Duck struct {
	flyBehavior   FlyIF
	quackBehavior QuackIF
}

func (d *Duck) SetFlyBehavior(flyBehavior FlyIF) {
	d.flyBehavior = flyBehavior
}
func (d *Duck) SetQuackBehavior(quackBehavior QuackIF) {
	d.quackBehavior = quackBehavior
}

func (d Duck) Swim() {
	fmt.Println("æ¸¸æ³³")
}
func (d Duck) Fly() {
	d.flyBehavior.Fly()
}
func (d Duck) Quack() {
	d.quackBehavior.Quack()
}

type MallardDuck struct {
	Duck
}

func (d MallardDuck) Display() {
	fmt.Println("ç»¿å¤´é¸­")
}

type RedheadDuck struct {
	Duck
}

func (d RedheadDuck) Display() {
	fmt.Println("çº¢å¤´é¸­")
}

type RubberDuck struct {
	Duck
}

func (d RubberDuck) Display() {
	fmt.Println("æ©¡çš®é¸­")
}

type SuperDuck struct {
	Duck
}

func (d SuperDuck) Display() {
	fmt.Println("è¶…çº§é¸­")
}
```

##### é£è¡Œè¡Œä¸º
```GO
type FlyIF interface {
	Fly()
}

type FlyWithWings struct {
}

func (f FlyWithWings) Fly() {
	fmt.Println("é£è¡Œ")
}

type FlyNoWay struct {
}

func (f FlyNoWay) Fly() {
	fmt.Println("å•¥äº‹ä¹Ÿä¸åšï¼Œä¸ä¼šé£")
}
```

##### å‘±å‘±å«è¡Œä¸º
```GO
type QuackIF interface {
	Quack()
}

type Quack struct {
}

func (q Quack) Quack() {
	fmt.Println("å‘±å‘±")
}

type Squeak struct {
}

func (q Squeak) Quack() {
	fmt.Println("å±å±")
}

type MuteQuack struct {
}

func (q MuteQuack) Quack() {
	fmt.Println("é™éŸ³ï¼Œä¸ä¼šå«")
}
```

#### ä½¿ç”¨
```GO
super := SuperDuck{}
super.SetQuackBehavior(MuteQuack{})
super.SetFlyBehavior(FlyWithWings{})
super.Display()
super.Quack()
super.Fly()

fmt.Println()

rubber := RubberDuck{}
rubber.SetQuackBehavior(Squeak{})
rubber.SetFlyBehavior(FlyNoWay{})
rubber.Display()
rubber.Quack()
rubber.Fly()
```

#### ç»“æœ
```
è¶…çº§é¸­
é™éŸ³ï¼Œä¸ä¼šå«
é£è¡Œ

æ©¡çš®é¸­
å±å±
å•¥äº‹ä¹Ÿä¸åšï¼Œä¸ä¼šé£
```

## ç”Ÿæˆå›¾çš„ä»£ç 
### ç­–ç•¥æ¨¡å¼
```plantuml
@startuml
title "ç­–ç•¥æ¨¡å¼"
package "å®¢æˆ·" {

  class Duck {
    -FlyBehavior flyBehavior
    -QuackBehavior quackBehavior

    +setFlyBehavior(FlyIF flyBehavior)
    +setQuackBehavior(QuackIF quackBehavior)
    ..
    +swim()
    +display()
    +fly()
    +quack()
  }

  class MallardDuck {
    +display() // ç»¿å¤´é¸­
  }
  class RedheadDuck {
    +display() // çº¢å¤´é¸­
  }
  class RubberDuck {
    +display() // æ©¡çš®é¸­
  }
  class SuperDuck {
    +display() // è¶…é¸­
  }

  MallardDuck--|>Duck
  RedheadDuck--|>Duck
  RubberDuck--|>Duck
  SuperDuck--|>Duck
}

package "é£è¡Œè¡Œä¸º" {

  interface FlyIF {
    +fly()
  }

  class FlyWithWings {
    +fly() // é£
  }
  class flyNoWay {
    +fly() // ä»€ä¹ˆäº‹éƒ½ä¸åš
  }

  FlyWithWings-up..|>FlyIF
  flyNoWay-up..|>FlyIF
}
package "å‘±å‘±å«è¡Œä¸º" {

  interface QuackIF {
    +quack()
  }

  class Quack {
    +quack() // å‘±å‘±
  }
  class Squeak {
    +quack() // å±å±
  }
  class MuteQuack {
    +quack() // ä»€ä¹ˆäº‹ä¹Ÿä¸åš
  }

  Quack-up..|>QuackIF
  Squeak-up..|>QuackIF
  MuteQuack-up..|>QuackIF
}

Duck-->FlyIF
Duck-->QuackIF


@enduml
```
