---
title: MySQL调优笔记201807
date: 2017-07-22T16:55:00.000Z
tags:
  - MySQL
  - 数据库
  - 笔记
---

MySQL 一次排查 CPU、内存问题的笔记

<!-- MORE -->
## 环境
- 腾讯云服务器
- 内存4G
- 主从
- 无读写分离

## CPU 100%
### 方法
- show full processlist
- explain

#### 索引使用错误
##### where 条件存在类型转换
现象是possible_keys 有索引，而key无值。
如字段 a 类型为char， 而where条件 a=123，需要修改成 a='123'


## 内存100%
得到的腾讯云解释其中一段是这样的。

> 数据库内存占用较高是正常的 , 这些内存大多数会分配给innodb buffer pool (后文称bp) , bp会缓存数据库中的热点数据到内存中来提高数据库的访问速度 , 请您无需担心 , 请您重点关注下缓存命中率这个指标 , 如果bp无法缓存数据库绝大多数的热点数据 ,在请求数据库时 ,数据库将不能直接从内存中读到数据 ,需要刷磁盘取数据 , 这样的速度是会比较慢的 ,同时也会伴随着热点数据从bp中被淘汰出内存 , 如果缓存命中率降低 ,则说明内存不足 ,需要及时升级内存配置
